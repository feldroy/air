# -----> Format - Write formatted files back! <------
# -----> Modify files directly, and apply necessary changes instead of only indicating them in a message. <------
# Note: we are using https://github.com/j178/prek a better `pre-commit`, re-engineered in Rust!
# See https://prek.j178.dev/configuration for more information
# See https://prek.j178.dev/builtin for more hooks
ci:
  autofix_prs: false
fail_fast: false
minimum_prek_version: '0.2.25'
repos:
  - repo: builtin
    hooks:
      - id: check-added-large-files # Prevent giant files from being committed.
        priority: 0
        args:
          - --maxkb=1024 # 1MB
      - id: check-case-conflict # Check for files that would conflict in case-insensitive filesystems.
        priority: 0
      - id: check-json # Attempts to load all json files to verify syntax.
        priority: 0
      - id: check-merge-conflict # Check for files that contain merge conflict strings.
        priority: 0
      - id: check-toml # Attempts to load all TOML files to verify syntax.
        priority: 0
      - id: check-yaml # Attempts to load all yaml files to verify syntax.
        priority: 0
        args: ['--allow-multiple-documents']
      - id: detect-private-key # Checks for the existence of private keys.
        priority: 0
      - id: end-of-file-fixer # Ensure newline at EOF.
      - id: fix-byte-order-marker # Remove UTF-8 byte order marker.
      - id: mixed-line-ending # Replaces or checks mixed line ending.
      - id: trailing-whitespace # Trim trailing whitespace.
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-ast # Simply check whether files parse as valid python.
        priority: 0
      - id: check-vcs-permalinks # Ensures that links to vcs websites are permalinks.
        priority: 0
      - id: name-tests-test # verifies that test files are named correctly.
        args: ['--pytest-test-first']
        priority: 0
        exclude: ^tests/(utils|components)\.py$
      - id: pretty-format-json # Checks that all your JSON files are pretty(keys are sorted and indented).
        args: ['--autofix']
  - repo: meta
    hooks:
      - id: check-hooks-apply
        priority: 0
        files: '^\.pre-commit-config-format\.yaml$'
      - id: check-useless-excludes
        priority: 0
        files: '^\.pre-commit-config-format\.yaml$'
  - repo: https://github.com/rhysd/actionlint
    rev: v1.7.10
    hooks:
      - id: actionlint
        language: golang
        priority: 0
        additional_dependencies:
          - "github.com/wasilibs/go-shellcheck/cmd/shellcheck@latest"
  - repo: https://github.com/adamchainz/blacken-docs
    rev: 1.20.0
    hooks:
      - id: blacken-docs # Run Black on Python code blocks in documentation files.
        language: python
        additional_dependencies:
          - black==25.12.0
        args: ['--preview', '--line-length=79']
  - repo: https://github.com/python-jsonschema/check-jsonschema
    rev: 0.36.0 # A JSON Schema CLI and pre-commit hook built on jsonschema.
    hooks:
      - id: check-codecov # Validate Codecov config against the schema provided by SchemaStore.
        priority: 0
      - id: check-github-issue-config # Validate GitHub Actions against the schema provided by SchemaStore.
        priority: 0
        files: '^\.github/ISSUE_TEMPLATE/config\.yaml$'
      - id: check-github-workflows # Validate GitHub Workflows against the schema provided by SchemaStore.
        priority: 0
      - id: check-renovate # Validate Renovate config against the schema provided by Renovate.
        language: python
        priority: 0
        additional_dependencies: ['json5']
  - repo: https://github.com/rtts/djhtml
    rev: 3.0.10
    hooks:
      - id: djhtml # A pure-Python Django/Jinja template indenter without dependencies.
        entry: djhtml --tabwidth 2
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.10
    hooks:
      - id: ruff-format
        args: ['--output-format=concise']
        types_or: [python]
      - id: ruff-check
        args: ['--fix', '--output-format=concise']
        types_or: [python]
  - repo: https://github.com/pre-commit/sync-pre-commit-deps
    rev: v0.0.3
    hooks:
      - id: sync-pre-commit-deps # Sync pre-commit hook dependencies based on other installed hooks.
        files: '^\.pre-commit-config-format\.yaml$'
  - repo: https://github.com/tsvikas/sync-with-uv
    rev: v0.5.0 # Sync .pre-commit-config.yaml from uv.lock
    hooks:
      - id: sync-with-uv
        name: Sync pre-commit hooks from `.pre-commit-config-check.yaml` with uv.lock
        entry: sync-with-uv --pre-commit-config .pre-commit-config-check.yaml
      - id: sync-with-uv
        name: Sync pre-commit hooks from `.pre-commit-config-format.yaml` with uv.lock
        entry: sync-with-uv --pre-commit-config .pre-commit-config-format.yaml
  - repo: https://github.com/tombi-toml/tombi-pre-commit
    rev: v0.7.14
    hooks:
      - id: tombi-format
  - repo: https://github.com/crate-ci/typos
    rev: v1.41.0
    hooks:
      - id: typos
        args: ['--write-changes', '--force-exclude', '--format=brief']
  - repo: https://github.com/henryiii/validate-pyproject-schema-store
    rev: 2026.01.02
    hooks:
      - id: validate-pyproject
        priority: 0
  - repo: https://github.com/google/yamlfmt
    rev: v0.20.0
    hooks:
      - id: yamlfmt
        # TODO -> Enable once all lint violations are fixed:
        #  - repo: https://github.com/zizmorcore/zizmor-pre-commit
        #    rev: v1.19.0
        #    hooks:
        #      - id: zizmor # Static analysis tool for GitHub Actions.
        #        args: [ '--fix=all' ]
