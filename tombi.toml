# ----------------------------------------------------> tombi.toml <----------------------------------------------------
# Tombi - TOML Formatter / Linter / Language Server, written in Rust.
# https://tombi-toml.github.io/tombi/docs/configuration

# Specifies the TOML version to use if not specified in the schema and comment directive.
toml-version = "v1.1.0" # Type: "v1.0.0" | "v1.1.0" Default: "v1.0.0"

# Configure file patterns for formatting and linting operations.
[files]
# The file match pattern to include in formatting and linting. Supports glob pattern.
include = ["**/*.toml"]
# The file match pattern to exclude from formatting and linting. Supports glob pattern.
exclude = [
    ".git/**",
    ".github/**/vendor/**",
    ".venv/**",
    ".vale/**",
    ".cache/**",
    "site/**",
    ".tox/**",
    ".nox/**",
    ".mypy_cache/**",
    ".ruff_cache/**",
    ".pytest_cache/**",
    ".hypothesis/**",
    "build/**",
    "dist/**",
    "*.egg-info/**",
    ".eggs/**",
    "node_modules/**",
    "target/**",
]

# Formatter options for TOML files.
[format]
# Configure formatting styles.
[format.rules]
array-bracket-space-width = 0 # The number of spaces inside the brackets of a single line array. Default: 0
array-comma-space-width = 1 # The number of spaces after the comma in a single line array. Default: 1
date-time-delimiter = "space" # The delimiter between date and time. Default: "T"
indent-style = "space" # The style of indentation, whether to use spaces or tabs for indentation. Default: "space"
indent-sub-tables = false # Whether to indent the sub-tables. Default: false
indent-table-key-value-pairs = false # Whether to indent the table key-value pairs. Default: false
indent-width = 4 # The number of spaces per indentation level. Default: 2
inline-table-brace-space-width = 1 # The number of spaces inside the brackets of a single line inline table. Default: 1
inline-table-comma-space-width = 1 # The number of spaces after the comma in a single line inline table. Default: 1
key-value-equals-sign-alignment = false # Whether to align the equals sign in the key-value pairs. Default: false
key-value-equals-sign-space-width = 1 # The number of spaces around the equals sign in a key-value pair. Default: 1
line-ending = "lf" # The type of line ending. Default: "lf"
line-width = 120 # The maximum line width. Default: 80
string-quote-style = "double" # The preferred quote character for strings. Default: "double"
trailing-comment-alignment = false # Whether to align the trailing comments in the key-value pairs. Default: false
trailing-comment-space-width = 1 # The number of spaces before the trailing comment. Default: 2

# Linter options for TOML files.
[lint]
# Configure individual lint rules with severity levels.
[lint.rules]
dotted-keys-out-of-order = "error" # Check if dotted keys are defined out of order. Default: "warn"
key-empty = "error" # Check if the key is empty. Default: "warn"
tables-out-of-order = "error" # Check if tables are defined out of order. Default: "warn"

# Language Server Protocol (LSP) feature configuration. Each feature can be individually enabled or disabled.
[lsp]
code-action.enabled = true
completion.enabled = true
diagnostic.enabled = true
document-link.enabled = true
formatting.enabled = true
goto-declaration.enabled = true
goto-definition.enabled = true
goto-type-definition.enabled = true
hover.enabled = true
workspace-diagnostic.enabled = true

# JSON Schema validation options for TOML files.
[schema]
enabled = true # Enable or disable schema validation. Default: true
strict = true # Strict validation; if additionalProperties is absent then treat it as false (unlike JSON Schema spec).

# Configure schema catalog for automatic schema detection.
[schema.catalog]
paths = [
    "tombi://www.schemastore.org/api/json/catalog.json",
    "https://www.schemastore.org/api/json/catalog.json",
]

# Use SchemaStore schemas for better editor help and validation.
# Tombi will also use the catalog automatically, but these explicit mappings make it predictable.
[[schemas]] # Root Schema
path = "tombi://www.schemastore.org/tombi.json"
include = ["tombi.toml"]

[[schemas]] # Root Schema
path = "https://json.schemastore.org/pyproject.json"
include = ["pyproject.toml", "**/pyproject.toml"]

[[schemas]] # Root Schema
path = "https://json.schemastore.org/uv.json"
include = ["uv.toml"]

[[schemas]] # Root Schema
path = "https://json.schemastore.org/ruff.json"
include = ["ruff.toml"]

[[schemas]] # Root Schema
path = "https://json.schemastore.org/ty.json"
include = ["ty.toml"]

[[schemas]] # Sub Schema
root = "tool.uv"
path = "https://json.schemastore.org/uv.json"
include = ["pyproject.toml"]

[[schemas]] # Sub Schema
root = "tool.ruff"
path = "https://json.schemastore.org/ruff.json"
include = ["pyproject.toml"]

[[schemas]] # Sub Schema
root = "tool.ty"
path = "https://json.schemastore.org/ty.json"
include = ["pyproject.toml"]

[[schemas]] # Root Schema
path = "https://raw.githubusercontent.com/rvben/rumdl/main/rumdl.schema.json"
include = ["rumdl.toml"]
