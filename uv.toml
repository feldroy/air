# -----------------------------------------------------> uv.toml <-----------------------------------------------------
# uv - An extremely fast Python package and project manager, written in Rust.
# https://docs.astral.sh/uv/reference/settings

# uv’s own config block for this project (not PyPI metadata).
required-version = ">=0.9.8"
# Whether to enable experimental, preview features.
preview = true
# Treat this repo as a package, so uv sync/run installs it editable, enabling CLI scripts, plugins, and package info.
package = true
# Use uv’s default: include the "dev" group for uv run and uv sync unless you pass explicit --group flags.
default-groups = ["dev"]
# Cache “hints” for you (or CI) to hash and decide when to rebuild an editable install or reuse a cached environment.
cache-keys = [
    { file = "pyproject.toml" }, # Rebuild if the project config changes.
    { file = "uv.lock" }, # Rebuild if exact dependency versions change.
    { dir = "src" }, # Rebuild on library source edits.
    { dir = "tests" }, # Rebuild on test edits (keeps test env fresh).
    { file = "README.md" }, # Rebuild if docs used in build change.
]

# Control where uv resolves packages from.
[sources]
# Always use the local workspace copy of "air" instead of PyPI; in a monorepo or dev, uv uses your checked-out code.
air = { workspace = true }

# Settings specific to uv_build.
[build-backend]
# Declare the “src/” layout so imports come from installed package, preventing path leaks and matching user installs.
module-root = "src"
# The single top-level package name under ./src; the backend validates this to catch layout mistakes early.
module-name = "air"
