// .github/renovate.json5
// https://docs.renovatebot.com
{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  dependencyDashboard: true,
  extends: [
    ":dependencyDashboard",
    "config:best-practices",
    "helpers:pinGitHubActionDigestsToSemver",
    "schedule:automergeDaily",
    ":rebaseStalePrs",
    ":semanticCommitType(build)",
    ":maintainLockFilesWeekly",
  ],
  // Keep semantic commit scope explicit
  semanticCommitScope: "deps",
  prCreation: "immediate",
  prConcurrentLimit: 3,
  prHourlyLimit: 3,
  suppressNotifications: [
    'prEditedNotification'
  ],
  // Rebase PRs when they fall behind the base branch
  "rebaseWhen": "behind-base-branch",
  labels: [
    "deps",
    "renovate"
  ],
  updatePinnedDependencies: true,
  // Limit Renovate to these managers only
  enabledManagers: [
    "pep621",
    "pep723",
    "pre-commit",
    "github-actions",
    "renovate-config-presets"
  ],
  "pre-commit": {
    enabled: true,
    managerFilePatterns: [
      // Matches: .pre-commit-config-check.yaml, .pre-commit-config-format.yaml, etc
      "/(^|/)\\.pre-commit-config-[^/.]+\\.ya?ml$/"
    ],
  },
  pep621: {
    enabled: true,
    // Default for pep621, kept explicit here
    managerFilePatterns: [
      "/(^|/)pyproject\\.toml$/"
    ],
  },
  packageRules: []
}
